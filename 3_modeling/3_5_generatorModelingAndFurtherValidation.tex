\section{Modeling the voltage pulse generator and the probe}
In this section, I describe the various steps I went through to properly model the voltage pulse generator and the problem it arises.
In the first place, I present a very simple and naive way of modeling the generator, using an ideal voltage source.
Then, after having analyzed the shortcomings of such model, I introduce a better model which better suits an actual generator.
Eventually, I analyze preliminary validation results including the new generator model.

    \subsection{Various generator architectures \ddcnew}
    There are several existing types of pulse generator.
    Some of them are designed as voltage sources, while others are current sources.
    In addition to this, the way their output stage is designed is also the origin of important behavioral differences.
    It is then important to take a quick look at these architectural differences.
%    Because there are various generator architecture, whether they are voltage sources, current sources, or how their output stage is designed, it is important to first take a look at them.
    We can distinguish pulse generator into two categories depending on their output stage coupling: DC-coupled and AC-coupled.
    In my work, I use a voltage source DC-coupled generator, but it is not the case of all other works.
    Therefore, I am going to cite various documented generators which have been used for the study of \bbi.

    For instance, in \cite{japbbi} and \cite{japbbi2}, the authors used an \esd gun to create the pulses on their IC substrate.
    These devices typically have a DC-coupled output, commonly feature an RCR output filter, and are designed to generate single pulses, very short and of very high voltage, without having a fine control over rise and fall times or pulse width.
    Their output impedance is not finely controller when compared to high precision high voltage pulse generators.
    Therefore, it is important to consider these parameters when elaborating an electrical model.

    On the other hand, there are other works, such as \cite{bbiColin}, in which the generator output stage consists in a transformer.
    Therefore, it is AC-coupled to the IC, which changes drastically the electrical behavior of such generator compared to a DC-coupled one.
    For instance, it is not possible to inject energy into the IC outside of pulse edges, while on DC-coupled generators it is.

    Eventually, like in my work, there are very high voltage high precision generators, which are DC-coupled and allow for precise pulse width and voltage set point.
    Their output stage may vary unit to unit, but their output impedance is precisely controller.
    In my case, the generator is specified to deliver its specifications into a \fiftyOhms{50} load.

    With this in mind, let us jump into the next section.

    \subsection{Voltage pulse generator naive model \ddcpu}
    First, let us consider a very simple voltage generator, an ideal variable voltage source, and a very simple probe, a perfect wire.
    In that scenario, as the generator is DC-coupled, it is biasing the substrate at 0 V at rest.
    However, under normal conditions, an IC substrate should not be biased externally.
    Indeed, whether in my model or in an actual IC, it can create unexpected behavior.
    In addition to this, our AVTECH generator does not bias the IC at rest, even when the probe is connected.
    Instead, it is placed in a high-impedance mode where its output presents a very high impedance to the IC backside, thus preventing any undesirable biasing.

    \subsection{More elaborated generator model \ddcnew}
    \input{3_modeling/figures/genModel}
    In this context, I decided to mimic our actual generator structure in my models to properly appreciate its behavior in the simulations.
    To do so, I chose to use a time-controlled resistor, which is a component available in SPICE.
    It is very straightforward, and consists in dynamically defining the resistor value.
    To that end, before the pulse, its value is high-impedance, during the pulse it is close to zero, and after the pulse it goes back to a high-impedance value.
    By doing so, I am avoiding any bias which could cause unexpected behavior of the model, which then could invalidate the simulation conclusions.

\section{Modeling BBI disturbances: further model validation}
With a correct \scs model and a correct generator model, it is now possible to perform \bbi disturbances simulations.
To that end, I distinguish \dwF and \twF substrates, to better analyze their differences, both in behavior and in structure.
As for the previous section, the ICs have the following measurements: a width of $550 \; \mu m$, a depth of $450 \; \mu m$, and a substrate thickness of $140 \; \mu m$, representing 1729 \scs connected to each other in a mesh array.
There are two external power supply rails located at the top and at the bottom of each IC.
The probe is a 30 µm square probe, placed at the IC center, and the generator settings are the following:
\begin{itemize}
    \setlength\itemsep{-0.1em}
    \item Voltage pulse maximum amplitude: -300 V;
    \item Voltage pulse width: 20 ns;
    \item Rise and fall times: 8 ns;
    \item Approximate impedance matching realized thanks to a \fiftyOhms{50} load, as in the Chapter \ref{chap:2_goodPractices}.
\end{itemize}
For each considered IC, I present various signals, in a two-dimensional view to fully appreciate the spatial behavior of the ICs under \bbi:
\begin{itemize}
    \setlength\itemsep{-0.1em}
    \item The voltage distribution inside the substrate at the apex of the disturbance (side view);
    \item The current distribution inside the substrate at the apex of the disturbance (side view);
    \item The current distribution at the epitaxy level (top view);
    \item The power supply voltage distribution (top view);
\end{itemize}

    \subsection{\dwF integrated circuits under \bbi \ddcnew}
    \input{3_modeling/figures/modelesSimusResul/SimuResultDualWell.tex}
    Fig. \ref{fig_simuResDw} presents the simulation results for a \dwF substrate integrated circuit.

    Sub-fig. \ref{subfig_iEpiDw} shows the epitaxy voltage distribution (view from above the IC) at the apex of the disturbance.
    This layer consists in the higher substrate layer, in other words the substrate layer the closest to the top of the \scs.
    Each spot represents the current flowing through the substrate to the top of the \scs.
    What is interesting to remark here is the locality of the injection.
    Indeed, the current distribution is mostly channeled above the probe (a.k.a at the center of the IC).
    Therefore, by cross-comparing the power supply voltage distribution shown in sub-fig. \ref{subfig_vsupplyDw} with the epitaxy voltage distribution, we can see that the power supply disturbance is stronger at the center of the IC.
    With this in mind, we can say that the logic gates located above the probe are more prone to malfunctioning due to the higher amount of energy transferred to them, compared to the others.

    Then, sub-fig. \ref{subfig_vsubcDw} and sub-fig. \ref{subfig_isubcDw} show the current and voltage distribution across the voltage (viewed from the side for more clarity).
    As the substrate is an electrically isotropic environment, it is natural to observe such distribution, with high current and voltage close to the probe, which then spreads evenly all cross its volume to finally reach the logic gates.

    Eventually, an important thing to remark here is that  the voltage distribution in the substrate indicates a DC-coupling between the probe and the IC.
    Indeed, the substrate and the top of the \scs act as a big resistor divider, thus explaining the lower voltage the further from the probe.
    It is important to note as it means that this is possible, for an attacker, to continue injecting energy into the IC during the pulse plateau, which would be impossible in a capacitive coupling scenario.

    \subsection{\twF integrated circuits under \bbi \ddcnew}
    \input{3_modeling/figures/modelesSimusResul/SimuResultTripleWell.tex}
    Fig. \ref{fig_simuResTw} presents the simulation results for a \twF substrate integrated circuit.

    Sub-fig. \ref{subfig_iEpiTw} shows the epitaxy voltage distribution (view from above the IC) at the apex of the disturbance.
    The first thing to remark when compared to the \dwF results is the very low current all across the epitaxy layer.
    Then, when observing the power supply voltage distribution, shown in sub-fig. \ref{subfig_vsupplyTw}, there are less spatial variation compared to the \dwF substrate, and the power supply voltage is lower at the center of the IC instead of being lower.

    We can observe the same phenomenon on both substrate results (sub-fig. \ref{subfig_vsubcTw} and sub-fig. \ref{subfig_isubcTw}), where the current distribution shows a lower amount of current and the voltage distribution is almost uniform, as if the voltage stabilized itself during the pulse plateau.

    It is explained thanks to the coupling existing between the probe and the top of the IC, which is, in that case, purely capacitive.
    Therefore, it is impossible to continue injecting energy during the plateau, but only during pulse edges.
    The circuits acts as a big capacitance, thus explaining the lower current at the apex of the disturbance and the voltage stabilization to the pulse plateau value, like it is observed in an electric capacitor.

    \subsection{Major differences between \dwF and \twF circuits \ddcnew}
    The main behavioral differences between \dwF and \twF substrate types lie in the substrate structure, more precisely in the way transistors are lithographed.
    Indeed, as I have stated previously, in \dwF substrates, NMOS are lithographed directly into the P-substrate, which allows a DC coupling between the backside of the IC and the NMOS.
    On the other hand, in \twF substrates, as NMOS and PMOS are electrically isolated from the substrate thanks to the P-well and the N-well, there is no DC coupling possible with neither PMOS nor NMOS.
    This is caused by the diodes bias, which act as capacitors.
    Therefore, the substrate is capacitively coupled with the logic gates in a \twF substrate, while it is DC-coupled with the NMOS and capacitively coupled with the PMOS in a \dwF substrate.
    These structural differences result in behavioral differences when performing \bbi, as I explained previously.
    Therefore, it changes the way one can create faults in an IC, or an IC region, depending on the substrate type.

%\section{Voltage pulse generator model and further validation \ddcold}
%\label{section:genModel}
%
%Introducing the generator did not come without major problems.
%Indeed, the latter inevitably interacts with the target IC, and depending on the real generator output stage architecture, this interaction can drastically vary from one to another.
%
%For example, when using ESD guns as in \cite{japbbi, japbbi2}, their output stages are usually AC-coupled, while on our works, we mostly use DC-coupled generators.
%These subtle differences in practice become major issues in simulation when not treated correctly.
%Indeed, even considering the transmission line as it has been recommended in Chapter \ref{chap:2goodPractices}, most DC-coupled high voltage generators use a high-impedance mode to disconnect the load from the generator before and after the generated pulses.
%Therefore, one has to consider this specific aspect when designing a proper BBI electrical model, as we will explain in this section.
%
%\subsection{Early generator models \ddcold}
%\label{subsection:earlyGenModel}
%
%The first models consisted in a PWL voltage source directly connected to the substrate of the IC, and we quickly observed abnormal operating point values.
%\textcolor{orange}{Je dois rajouter des valeurs chiffrées.}
%Indeed, in this setup, at rest, the generator is equivalent a DC voltage source applying 0 V to the backside of the simulated IC.
%Therefore, it applies an undesired bias to the substrate and thus changes the operating point, inducing a high amount of charges flowing between power sources, thus disturbing the power delivery network.
%To circumvent this issue, we chose to mimic the behavior of an actual high voltage pulse generator and to switch between a high impedance mode and a voltage pulse mode as a function of the pulse time.
%This allowed to observe correct operating points with the generator connected, as it is the case in a real experiment.
%\textcolor{orange}{Je rajouterai les figures.}
%
%\subsection{Further generator models and verification \ddcold}
%\label{subsection:furtherGenModel}
%
%Because the previously explained generator model is electrically perfect and does not include any impedance mismatching effects, we extended the model to include the generator output impedance and the transmission line.
%\textcolor{orange}{Peut-être faire un schéma ?}
%It allowed us to observe impedance mismatch effects, which are of great importance when performing BBI (Chapter \ref{chap:1intro}), as the injected pulses are very fast and of high amplitude.
%Thus, impedance mismatch greatly changes the effective applied voltage pulse and injected currents, while also modifying unpredictably the induced disturbances, as we will observe further in this manuscript.
%
%\input{3_modeling/figures/simuCurrentMaps/coupeCourant.tex}
%In order to verify more thoroughly the soundness of the proposed models, a circuit under BBI is simulated in order to analyze the current distribution and amplitude, specifically at the peak of the voltage pulse.
%Fig. \ref{fig:coupeCourantDwTw} presents the results for both dual-well and triple-well ICs.
%The substrate being a resistive environment, it is natural to observe isotropic hemispheric current distributions.
%However, it is interesting to notice that the results show a lower amount of current concerning the triple-well IC compared to the dual-well one.
%It can be explained thanks to the coupling between the probe/substrate and the logic gates.
%On one hand, as shown in Fig. \ref{fig:dualTripleIvx}, in the dual-well IC, the charges do not have to cross any silicon junction in order to reach the NMOS transistors, while there is one junction between the probe and the PMOS transistors.
%On the other hand, concerning the triple-well IC, there is always at least one silicon junction to cross in order to reach the transistors.
%Because of this, and because the voltage pulse will inevitably bias the diode, it will change the coupling whether the diode is conducting or blocking.
%When the diode is conducting, the transistors are DC-coupled to the probe, whereas when the diode is blocking, the transistors are AC-coupled.
%In the second case, it means that charges can flow only on the edge of the pulse.
%Thus, during the pulse's plateau, there is no charge flow.
