% !TeX root = ./0_Manuscript.tex

%%% Path
\RequirePackage{etoolbox}
\csdef{input@path}{%
 {sty/}% cls, sty files
 {img/}% eps files
 {bib/}% eps files
}%
\csgdef{bibdir}{bib/}% bst, bib files

\documentclass[11pt]{book}
\pdfoutput=1

%%% Styles
\usepackage{manuscriptLayout}
\usepackage{manuscriptCover}

\usepackage{amssymb,amsmath,amsthm,amsfonts}
%\usepackage[onelanguage,english,ruled,vlined,linesnumbered]{algorithm2e}
\usepackage{a4wide}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{fancybox}
\usepackage{comment}% Diff
\usepackage{color}
%\usepackage{enumitem} % Pour changer le style des listes d'items
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{geometry}
\usepackage{tocloft}
\usepackage[tight]{minitoc}
\usepackage{natbib}
% \usepackage{bibtex}
% \usepackage{biblatex}
\usepackage{palatino}
\usepackage{placeins}
\usepackage{pgf}
\usepackage{subfloat}
%\usepackage{subfig}
\usepackage{tabularx}
\usepackage{tikz}
\usepackage[european, noarrowmos]{circuitikz}
\usepackage{svg}
\usepackage{import}
%\usepackage[linesnumbered,ruled,vlined]{algorithm2e}
\usepackage{algorithm}
%\usepackage{algorithmic}
\usepackage{algpseudocode}
\usepackage{glossaries}
\usepackage{fancyvrb}
%\usepackage[filename=0_Manuscript, mouseover, movetips, inactive]{fancytooltips}

\usepackage{hyperref}

\usepackage{datetime2}
\usepackage{textgreek}
\usepackage{textcomp}
%\usepackage{layouts}
\usepackage[export]{adjustbox}
%\usepackage[dvipsnames]{xcolor}
\usepackage{colortbl}
\usepackage{hhline}
\usepackage{tabu}
\usepackage{tabularx}
\usepackage{bibentry}
\usepackage{csquotes}
\usepackage{xspace}
%\showboxes
%\showframe

\definecolor{myCyan}{RGB}{59, 204, 255}
\definecolor{myViolet}{RGB}{169, 0, 173}
\newcommand{\cRef}[2]{\hyperref[#1]{\textcolor{myViolet}{#2}}}
\newcommand{\fiftyOhms}[1]{\mbox{#1 \textOmega\xspace}}
\newcommand{\cGood}{\rowcolor{green!25}}
\newcommand{\cOk}{\rowcolor{blue!25}}
\newcommand{\cBad}{\rowcolor{orange!25}}
\newcommand{\cErr}{\rowcolor{red!25}}
\newcommand{\cYe}{\rowcolor{yellow!25}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%----------------------%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Comment the three (or more) next lines that ar not already commented before compiling final build %%
%\usepackage[inline]{showlabels}
%\newcommand{\DDC}{\textcolor{myCyan}{\footnotesize COMPILATION DATE: \DTMnow}}
%\newcommand{\ddc}{\textcolor{myCyan}{\footnotesize COMPILATION DATE: \DTMnow}}
\newcommand{\DDC}{\textcolor{myCyan}{\footnotesize \DTMnow}}
\newcommand{\ddc}{\textcolor{myCyan}{\footnotesize \DTMnow}}

%% Uncomment the three next lines before compiling final build %%
%\usepackage[final]{showlabels}
%\newcommand{\DDC}{}
%\newcommand{\ddc}{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%----------------------%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%custom adac

%\usepackage[export]{adjustbox}
%\usepackage[all]{hypcap}
%\usepackage{textcomp, textgreek}
%\usepackage{color, soul}
%\usepackage{booktabs}
%\usepackage{array}
%\usepackage{multirow}
%\usepackage{makecell}
%\usepackage[newfloat]{minted}
%\usepackage{xfrac}

%\usepackage[nottoc]{tocbibind}
%\usepackage{etoolbox}

\usetikzlibrary{
    positioning,
    backgrounds,
    shapes,
    arrows.meta,
    calc
}

%\usepackage{subcaption}

%\usepackage{yhmath}

%\SetKwInput{KwInput}{EntrÃ©es}                % Set the Input
%\SetKwInput{KwOutput}{Sorties}              % set the Output
%\SetKwInput{KwInit}{Initialisations}


%%% Options packages
%\frenchbsetup{StandardLists=true}
\selectcolormodel{RGB}
\geometry{%
  a4paper, %body={150mm,220mm},
  left=25mm,top=30mm,
  headheight=7mm,
  headsep=14mm,
  marginparsep=4mm, marginparwidth=27mm
}

\setstretch{1.25}

\setcounter{minitocdepth}{2}
\setcounter{tocdepth}{2}
\setcounter{secnumdepth}{4}

%\makeatletter
%\pretocmd{\chapter}{\addtocontents{toc}{\protect\addvspace{-5\p@}}}{}{}
%\pretocmd{\section}{\addtocontents{toc}{\protect\addvspace{-10\p@}}}{}{}
%\pretocmd{\subsection}{\addtocontents{toc}{\protect\addvspace{-10\p@}}}{}{}
%%\pretocmd{\figure}{\addtocontents{tof}{\protect\addvspace{-10\p@}}}{}{}
%\makeatother

%\renewcommand\cftbeforechapskip{\vskip7pt}
%\renewcommand\cftbeforesecskip{\vskip5pt}
%\renewcommand\cftbeforefigskip{\vskip5pt}
%\renewcommand\cftchapafterpnum{\vskip5pt}
%\renewcommand\cftsecafterpnum{\vskip7pt}
%\renewcommand\cftsubsecafterpnum{\vskip2pt}
%\renewcommand\cftfigafterpnum{\vskip5pt}
%\renewcommand\cfttabafterpnum{\vskip5pt}

% ============================================================================
% Custom commands

\input{custom_cmds}

\newenvironment{vcenterpage}
{\newpage\vspace*{\fill}\thispagestyle{empty}\renewcommand{\headrulewidth}{0pt}}
{\vspace*{\fill}}
%\endlocaldefs

\pagestyle{fancy}
\makeatletter
\DeclareRobustCommand{\format@sec@number}[2]{{\normalfont\upshape#1}#2}
\renewcommand{\chaptermark}[1]{%
  \markboth{\format@sec@number{\ifnum\c@secnumdepth>\m@ne\@chapapp\ \thechapter. \fi}{#1}}{}}
\renewcommand{\sectionmark}[1]{%
  \markright{\format@sec@number{\ifnum\c@secnumdepth>\z@\thesection. \fi}{#1}}}
\makeatother

\fancyhf{}
\fancyhead[RE]{\itshape\nouppercase{\leftmark}}
\fancyhead[LO]{\itshape\nouppercase{\rightmark}}
\fancyhead[LE,RO]{\thepage}

\fancypagestyle{default}{%
    \fancyhead[RE]{\itshape\nouppercase{\leftmark}}
    \fancyhead[LO]{\itshape\nouppercase{\rightmark}}
    \fancyhead[LE,RO]{\thepage}
}

\fancypagestyle{listofacronyms}{%
    \fancyhead[RE]{\itshape\nouppercase{List of Acronyms}}
    \fancyhead[LO]{\itshape\nouppercase{\rightmark}}
    \fancyhead[LE,RO]{\thepage}
}%

%\addto\captionsfrench{
%    \renewcommand{\mtctitle}{Table of content}
%    \renewcommand{\listfigurename}{List of the Figures}
%    \renewcommand{\listalgorithmcfname}{List of the Algorithms}
%}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{pdfbase}[2017/03/16]
\usepackage{xparse,ocgbase}
\usepackage{xcolor,calc}
\usepackage{tikzpagenodes,linegoal}
\usetikzlibrary{calc}
\usepackage{tcolorbox}

\ExplSyntaxOn
\let\tpPdfLink\pbs_pdflink:nn
\let\tpPdfAnnot\pbs_pdfannot:nnnn\let\tpPdfLastAnn\pbs_pdflastann:
\let\tpAppendToFields\pbs_appendtofields:n
\def\tpPdfXform{\pbs_pdfxform:nnnnn{1}{1}{}{}}
\let\tpPdfLastXform\pbs_pdflastxform:
\let\cListSet\clist_set:Nn\let\cListItem\clist_item:Nn
\ExplSyntaxOff

\makeatletter
\NewDocumentCommand{\tooltip}{%
    ssssO{\ifdefined\@linkcolor\@linkcolor\else blue\fi}mO{yellow!20}mO{0pt,0pt}%
}{{%
        \leavevmode%
        \IfBooleanT{#2}{%
            %for variants with two and more stars, put tip box on a PDF Layer (OCG)
            \ocgbase@new@ocg{tipOCG.\thetcnt}{%
                /Print<</PrintState/OFF>>/Export<</ExportState/OFF>>%
            }{false}%
            \xdef\tpTipOcg{\ocgbase@last@ocg}%
            %prevent simultaneous visibility of multiple non-draggable tooltips
            \ocgbase@add@ocg@to@radiobtn@grp{tool@tips}{\ocgbase@last@ocg}%
        }%
        \tpPdfLink{%
            \IfBooleanTF{#4}{%
                /Subtype/Link/Border[0 0 0]/A <</S/SetOCGState/State [/Toggle \tpTipOcg]>>
            }{%
                /Subtype/Screen%
                /AA<<%
                \IfBooleanTF{#3}{%
                    /E<</S/SetOCGState/State [/Toggle \tpTipOcg]>>%
                }{%
                    \IfBooleanTF{#2}{%
                        /E<</S/SetOCGState/State [/ON \tpTipOcg]>>%
                        /X<</S/SetOCGState/State [/OFF \tpTipOcg]>>%
                    }{
                        \IfBooleanTF{#1}{%
                            /E<</S/JavaScript/JS(%
                            var fd=this.getField('tip.\thetcnt');%
                            if(typeof(click\thetcnt)=='undefined'){%
                                var click\thetcnt=false;%
                                var fdor\thetcnt=fd.rect;var dragging\thetcnt=false;%
                            }%
                            if(fd.display==display.hidden){%
                                fd.delay=true;fd.display=display.visible;fd.delay=false;%
                            }else{%
                                if(!click\thetcnt&&!dragging\thetcnt){fd.display=display.hidden;}%
                                if(!dragging\thetcnt){click\thetcnt=false;}%
                            }%
                            this.dirty=false;%
                            )>>%
                        }{%
                            /E<</S/JavaScript/JS(%
                            var fd=this.getField('tip.\thetcnt');%
                            if(typeof(click\thetcnt)=='undefined'){%
                                var click\thetcnt=false;%
                                var fdor\thetcnt=fd.rect;var dragging\thetcnt=false;%
                            }%
                            if(fd.display==display.hidden){%
                                fd.delay=true;fd.display=display.visible;fd.delay=false;%
                            }%
                            this.dirty=false;%
                            )>>%
                            /X<</S/JavaScript/JS(%
                            if(!click\thetcnt&&!dragging\thetcnt){fd.display=display.hidden;}%
                            if(!dragging\thetcnt){click\thetcnt=false;}%
                            this.dirty=false;%
                            )>>%
                        }%
                        /U<</S/JavaScript/JS(click\thetcnt=true;this.dirty=false;)>>%
                        /PC<</S/JavaScript/JS (%
                        var fd=this.getField('tip.\thetcnt');%
                        try{fd.rect=fdor\thetcnt;}catch(e){}%
                        fd.display=display.hidden;this.dirty=false;%
                        )>>%
                        /PO<</S/JavaScript/JS(this.dirty=false;)>>%
                    }%
                }%
                >>%
            }%
        }{{\color{#5}#6}}%
        \sbox\tiptext{%
            \IfBooleanT{#2}{%
                \ocgbase@oc@bdc{\tpTipOcg}\ocgbase@open@stack@push{\tpTipOcg}}%
            %\fcolorbox{black}{#7}{#8}%
            \tcbox[colframe=black,colback=#7,size=fbox,arc=1ex,sharp corners=southwest]{#8}%
            \IfBooleanT{#2}{\ocgbase@oc@emc\ocgbase@open@stack@pop\tpNull}%
        }%
        \cListSet\tpOffsets{#9}%
        \edef\twd{\the\wd\tiptext}%
        \edef\tht{\the\ht\tiptext}%
        \edef\tdp{\the\dp\tiptext}%
        \tipshift=0pt%
        \IfBooleanTF{#2}{%
            %OCG-based (that is, all non-draggable) boxes should not extend beyond the
            %current column as they may get overlaid by text in the neighbouring column
            \setlength\whatsleft{\linegoal}%
        }{%
            \measureremainder{\whatsleft}%
        }%
        \ifdim\whatsleft<\dimexpr\twd+\cListItem\tpOffsets{1}\relax%
        \setlength\tipshift{\whatsleft-\twd-\cListItem\tpOffsets{1}}\fi%
        \IfBooleanF{#2}{\tpPdfXform{\tiptext}}%
        \raisebox{\heightof{#6}+\tdp+\cListItem\tpOffsets{2}}[0pt][0pt]{%
            \makebox[0pt][l]{\hspace{\dimexpr\tipshift+\cListItem\tpOffsets{1}\relax}%
                \IfBooleanTF{#2}{\usebox{\tiptext}}{%
                    \tpPdfAnnot{\twd}{\tht}{\tdp}{%
                        /Subtype/Widget/FT/Btn/T (tip.\thetcnt)%
                        /AP<</N \tpPdfLastXform>>%
                        /MK<</TP 1/I \tpPdfLastXform/IF<</S/A/FB true/A [0.0 0.0]>>>>%
                        /Ff 65536/F 3%
                        /AA <<%
                        /U <<%
                        /S/JavaScript/JS(%
                        var fd=event.target;%
                        var mX=this.mouseX;var mY=this.mouseY;%
                        var drag=function(){%
                            var nX=this.mouseX;var nY=this.mouseY;%
                            var dX=nX-mX;var dY=nY-mY;%
                            var fdr=fd.rect;%
                            fdr[0]+=dX;fdr[1]+=dY;fdr[2]+=dX;fdr[3]+=dY;%
                            fd.rect=fdr;mX=nX;mY=nY;%
                        };%
                        if(!dragging\thetcnt){%
                            dragging\thetcnt=true;Int=app.setInterval("drag()",1);%
                        }%
                        else{app.clearInterval(Int);dragging\thetcnt=false;}%
                        this.dirty=false;%
                        )%
                        >>%
                        >>%
                    }%
                    \tpAppendToFields{\tpPdfLastAnn}%
                }%
        }}%
        \stepcounter{tcnt}%
}}
\makeatother
\newsavebox\tiptext\newcounter{tcnt}
\newlength{\whatsleft}\newlength{\tipshift}
\newcommand{\measureremainder}[1]{%
    \begin{tikzpicture}[overlay,remember picture]
        \path let \p0 = (0,0), \p1 = (current page.east) in
        [/utils/exec={\pgfmathsetlength#1{\x1-\x0}\global#1=#1}];
    \end{tikzpicture}%
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%